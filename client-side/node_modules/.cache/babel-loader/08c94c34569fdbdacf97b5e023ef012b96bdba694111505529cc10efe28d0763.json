{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/vijay/Desktop/start/client-side/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/vijay/Desktop/start/client-side/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/vijay/Desktop/start/client-side/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import OrganisationCard from\"../../Components/OrganisationCard\";import testImg from\"./testimg.jpeg\";import\"./OrganisationPage.css\";import Footer from\"../../Components/Footer\";import NavBar from\"../../Components/NavBar\";import Alert from\"react-bootstrap/Alert\";import Spinner from\"react-bootstrap/Spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function OrganisationsPage(prop){var navigate=useNavigate();var currentUser_={};var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),alertHead=_useState2[0],setAlertHead=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),alertBody=_useState4[0],setAlertBody=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),alertVarient=_useState6[0],setAlertVarient=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),show=_useState8[0],setShow=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),rerenderer=_useState10[0],setRerenderer=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),HtmlLoaded=_useState12[0],setHtmlLoaded=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),CardsComponent=_useState14[0],setCardsComponent=_useState14[1];useEffect(function(){currentUser_=JSON.parse(localStorage.getItem(\"currentUser\"));if(currentUser_==null){navigate(\"/landing\");}var doWork=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var currentUser_,reqData,response,fetchedData,cards,tempCardsComponent;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:currentUser_=JSON.parse(localStorage.getItem(\"currentUser\"));reqData={email:currentUser_.email,password:currentUser_.password,organisations:currentUser_.organisations};_context.prev=2;_context.next=5;return fetch(\"https://dizkuz-server.onrender.com/organisations\",{method:\"POST\",body:JSON.stringify(reqData),headers:{\"Content-Type\":\"application/json\"}});case 5:response=_context.sent;_context.next=8;return response.json();case 8:fetchedData=_context.sent;if(fetchedData.status===\"authFailed\"){localStorage.removeItem(\"currentUser\");navigate(\"/landing\");}else if(fetchedData.status===\"failed\"){setAlertHead(\"Data failed to retrieve!\");setAlertBody(\"There was some unexpected error in retrieving the data of your organisations. Please try again.\");setAlertVarient(\"danger\");setShow(true);}else{cards=fetchedData.data;if(cards.length===0){tempCardsComponent=/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:\"100px\",paddingBottom:\"100px\",color:\"darkred\"},children:/*#__PURE__*/_jsx(\"h4\",{children:\"Sorry, currently you do not belong to any organisation. Try creating your own organisation.\"})});}else{tempCardsComponent=cards.map(function(card){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(OrganisationCard,{title:card.name,id:card._id,rerenderer:rerenderer,setRerenderer:setRerenderer},card._id)});});}setCardsComponent(tempCardsComponent);setHtmlLoaded(true);}_context.next=18;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);setAlertHead(\"Data failed to retrieve!\");setAlertBody(\"There was some error in retrieving the data of your organisations. Please check your connection and try again.\");setAlertVarient(\"danger\");setShow(true);case 18:case\"end\":return _context.stop();}},_callee,null,[[2,12]]);}));return function doWork(){return _ref.apply(this,arguments);};}();doWork();},[rerenderer]);return HtmlLoaded?show?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:\"56px\"},children:[/*#__PURE__*/_jsxs(Alert,{variant:alertVarient,onClose:function onClose(){return setShow(false);},dismissible:true,children:[/*#__PURE__*/_jsx(Alert.Heading,{children:alertHead}),/*#__PURE__*/_jsx(\"p\",{children:alertBody})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"OrganisationPageContainer1\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{textAlign:\"center\"},children:\"Your Organisations\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"OrganisationPageContainer2\",children:CardsComponent})]})]}),/*#__PURE__*/_jsx(Footer,{})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:\"100px\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"OrganisationPageContainer1\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{textAlign:\"center\"},children:\"Your Organisations\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"OrganisationPageContainer2\",children:CardsComponent})]})}),/*#__PURE__*/_jsx(Footer,{})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"SpinnerContainer\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"dark\"})}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","OrganisationCard","testImg","Footer","NavBar","Alert","Spinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrganisationsPage","prop","navigate","currentUser_","_useState","_useState2","_slicedToArray","alertHead","setAlertHead","_useState3","_useState4","alertBody","setAlertBody","_useState5","_useState6","alertVarient","setAlertVarient","_useState7","_useState8","show","setShow","_useState9","_useState10","rerenderer","setRerenderer","_useState11","_useState12","HtmlLoaded","setHtmlLoaded","_useState13","_useState14","CardsComponent","setCardsComponent","JSON","parse","localStorage","getItem","doWork","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","reqData","response","fetchedData","cards","tempCardsComponent","wrap","_callee$","_context","prev","next","email","password","organisations","fetch","method","body","stringify","headers","sent","json","status","removeItem","data","length","style","paddingTop","paddingBottom","color","children","map","card","title","name","id","_id","t0","stop","apply","arguments","variant","onClose","dismissible","Heading","className","textAlign","animation"],"sources":["C:/Users/vijay/Desktop/start/client-side/src/Pages/OrganisationsPage/OrganisationsPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport OrganisationCard from \"../../Components/OrganisationCard\";\nimport testImg from \"./testimg.jpeg\";\nimport \"./OrganisationPage.css\";\nimport Footer from \"../../Components/Footer\";\nimport NavBar from \"../../Components/NavBar\";\nimport Alert from \"react-bootstrap/Alert\";\nimport Spinner from \"react-bootstrap/Spinner\";\n\nexport default function OrganisationsPage(prop) {\n     const navigate = useNavigate();\n     let currentUser_ = {};\n\n     const [alertHead, setAlertHead] = useState(\"\");\n     const [alertBody, setAlertBody] = useState(\"\");\n     const [alertVarient, setAlertVarient] = useState(\"\");\n     const [show, setShow] = useState(false);\n     const [rerenderer, setRerenderer] = useState(false);\n     const [HtmlLoaded, setHtmlLoaded] = useState(false);\n     const [CardsComponent, setCardsComponent] = useState(null);\n\n     useEffect(() => {\n          currentUser_ = JSON.parse(localStorage.getItem(\"currentUser\"));\n          if (currentUser_ == null) {\n               navigate(\"/landing\");\n          }\n          const doWork = async () => {\n               let currentUser_ = JSON.parse(\n                    localStorage.getItem(\"currentUser\")\n               );\n               const reqData = {\n                    email: currentUser_.email,\n                    password: currentUser_.password,\n                    organisations: currentUser_.organisations,\n               };\n               try {\n                    const response = await fetch(\n                         \"https://dizkuz-server.onrender.com/organisations\",\n                         {\n                              method: \"POST\",\n                              body: JSON.stringify(reqData),\n                              headers: {\n                                   \"Content-Type\": \"application/json\",\n                              },\n                         }\n                    );\n                    const fetchedData = await response.json();\n                    if (fetchedData.status === \"authFailed\") {\n                         localStorage.removeItem(\"currentUser\");\n                         navigate(\"/landing\");\n                    } else if (fetchedData.status === \"failed\") {\n                         setAlertHead(\"Data failed to retrieve!\");\n                         setAlertBody(\n                              \"There was some unexpected error in retrieving the data of your organisations. Please try again.\"\n                         );\n                         setAlertVarient(\"danger\");\n                         setShow(true);\n                    } else {\n                         const cards = fetchedData.data;\n                         let tempCardsComponent;\n                         if (cards.length === 0) {\n                              tempCardsComponent = (\n                                   <div\n                                        style={{\n                                             paddingTop: \"100px\",\n                                             paddingBottom: \"100px\",\n                                             color: \"darkred\",\n                                        }}\n                                   >\n                                        <h4>\n                                             Sorry, currently you do not belong\n                                             to any organisation. Try creating\n                                             your own organisation.\n                                        </h4>\n                                   </div>\n                              );\n                         } else {\n                              tempCardsComponent = cards.map((card) => {\n                                   return (\n                                        <div>\n                                             <OrganisationCard\n                                                  title={card.name}\n                                                  id={card._id}\n                                                  key={card._id}\n                                                  rerenderer={rerenderer}\n                                                  setRerenderer={setRerenderer}\n                                             />\n                                        </div>\n                                   );\n                              });\n                         }\n                         setCardsComponent(tempCardsComponent);\n                         setHtmlLoaded(true);\n                    }\n               } catch (error) {\n                    setAlertHead(\"Data failed to retrieve!\");\n                    setAlertBody(\n                         \"There was some error in retrieving the data of your organisations. Please check your connection and try again.\"\n                    );\n                    setAlertVarient(\"danger\");\n                    setShow(true);\n               }\n          };\n          doWork();\n     }, [rerenderer]);\n     return HtmlLoaded ? (\n          show ? (\n               <>\n                    <NavBar />\n                    <div style={{ paddingTop: \"56px\" }}>\n                         <Alert\n                              variant={alertVarient}\n                              onClose={() => setShow(false)}\n                              dismissible\n                         >\n                              <Alert.Heading>{alertHead}</Alert.Heading>\n                              <p>{alertBody}</p>\n                         </Alert>\n                         <div className=\"OrganisationPageContainer1\">\n                              <h3 style={{ textAlign: \"center\" }}>\n                                   Your Organisations\n                              </h3>\n                              <hr />\n                              <div className=\"OrganisationPageContainer2\">\n                                   {CardsComponent}\n                              </div>\n                         </div>\n                    </div>\n                    <Footer />\n               </>\n          ) : (\n               <>\n                    <NavBar />\n                    <div style={{ paddingTop: \"100px\" }}>\n                         <div className=\"OrganisationPageContainer1\">\n                              <h3 style={{ textAlign: \"center\" }}>\n                                   Your Organisations\n                              </h3>\n                              <hr />\n                              <div className=\"OrganisationPageContainer2\">\n                                   {CardsComponent}\n                              </div>\n                         </div>\n                    </div>\n                    <Footer />\n               </>\n          )\n     ) : (\n          <>\n               <NavBar />\n               <div className=\"SpinnerContainer\">\n                    <Spinner animation=\"border\" variant=\"dark\" />\n               </div>\n               <Footer />\n          </>\n     );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}