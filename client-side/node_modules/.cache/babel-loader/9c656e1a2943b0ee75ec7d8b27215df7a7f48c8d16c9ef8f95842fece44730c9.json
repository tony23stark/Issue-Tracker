{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/vijay/Desktop/start/client-side/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/vijay/Desktop/start/client-side/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/vijay/Desktop/start/client-side/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import\"./Components.css\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MessageInput(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var updateMessage=function updateMessage(e){setMessage(e.target.value);};var sendMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var dizkuzData,currentUser_,IssID,inp,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;dizkuzData=JSON.parse(localStorage.getItem(\"dizkuzData\"));currentUser_=JSON.parse(localStorage.getItem(\"currentUser\"));IssID=dizkuzData.currentIssue;inp={name:currentUser_.name,email:currentUser_.email,password:currentUser_.password,User_id:currentUser_._id,body:message,IssueID:IssID};_context.next=7;return fetch(\"https://dizkuz-server.onrender.com/sendmessage\",{method:\"POST\",body:JSON.stringify(inp),headers:{\"Content-Type\":\"application/json\"}});case 7:response=_context.sent;_context.next=10;return response.json();case 10:data=_context.sent;if(data.status===\"success\"){props.setChatReloader(props.chatReloader+1);setMessage(\"\");}else{props.setAlertHead(\"Some unknown Error occured!\");props.setAlertBody(\"There was some unexpected error which prevented the message to be sent. Please try again.\");props.setAlertVarient(\"danger\");props.setAlertShow(true);}_context.next=20;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);props.setAlertHead(\"Unexpected Error occured!\");props.setAlertBody(\"Could not send the message. Please check your connection and try again.\");props.setAlertVarient(\"danger\");props.setAlertShow(true);case 20:case\"end\":return _context.stop();}},_callee,null,[[0,14]]);}));return function sendMessage(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"MessageInputBar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"MessageBar\",children:[/*#__PURE__*/_jsx(Form,{className:\"Inputmsg\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter your message\",onChange:updateMessage,value:message})}),/*#__PURE__*/_jsx(Button,{className:\"sendBtn\",variant:\"outline-success\",onClick:sendMessage,children:\"Send\"})]})});}","map":{"version":3,"names":["React","useState","Form","Button","jsx","_jsx","jsxs","_jsxs","MessageInput","props","_useState","_useState2","_slicedToArray","message","setMessage","updateMessage","e","target","value","sendMessage","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dizkuzData","currentUser_","IssID","inp","response","data","wrap","_callee$","_context","prev","next","JSON","parse","localStorage","getItem","currentIssue","name","email","password","User_id","_id","body","IssueID","fetch","method","stringify","headers","sent","json","status","setChatReloader","chatReloader","setAlertHead","setAlertBody","setAlertVarient","setAlertShow","t0","stop","apply","arguments","className","children","Control","type","placeholder","onChange","variant","onClick"],"sources":["C:/Users/vijay/Desktop/start/client-side/src/Components/MessageInput.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./Components.css\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\n\nexport default function MessageInput(props) {\n     const [message, setMessage] = useState(\"\");\n\n     const updateMessage = (e) => {\n          setMessage(e.target.value);\n     };\n\n     const sendMessage = async () => {\n          try {\n               const dizkuzData = JSON.parse(\n                    localStorage.getItem(\"dizkuzData\")\n               );\n               const currentUser_ = JSON.parse(\n                    localStorage.getItem(\"currentUser\")\n               );\n               const IssID = dizkuzData.currentIssue;\n               const inp = {\n                    name: currentUser_.name,\n                    email: currentUser_.email,\n                    password: currentUser_.password,\n                    User_id: currentUser_._id,\n                    body: message,\n                    IssueID: IssID,\n               };\n               const response = await fetch(\n                    \"https://dizkuz-server.onrender.com/sendmessage\",\n                    {\n                         method: \"POST\",\n                         body: JSON.stringify(inp),\n                         headers: {\n                              \"Content-Type\": \"application/json\",\n                         },\n                    }\n               );\n               const data = await response.json();\n               if (data.status === \"success\") {\n                    props.setChatReloader(props.chatReloader + 1);\n                    setMessage(\"\");\n               } else {\n                    props.setAlertHead(\"Some unknown Error occured!\");\n                    props.setAlertBody(\n                         \"There was some unexpected error which prevented the message to be sent. Please try again.\"\n                    );\n                    props.setAlertVarient(\"danger\");\n                    props.setAlertShow(true);\n               }\n          } catch (error) {\n               props.setAlertHead(\"Unexpected Error occured!\");\n               props.setAlertBody(\n                    \"Could not send the message. Please check your connection and try again.\"\n               );\n               props.setAlertVarient(\"danger\");\n               props.setAlertShow(true);\n          }\n     };\n     return (\n          <div className=\"MessageInputBar\">\n               <div className=\"MessageBar\">\n                    <Form className=\"Inputmsg\">\n                         <Form.Control\n                              type=\"text\"\n                              placeholder=\"Enter your message\"\n                              onChange={updateMessage}\n                              value={message}\n                         />\n                    </Form>\n                    <Button\n                         className=\"sendBtn\"\n                         variant=\"outline-success\"\n                         onClick={sendMessage}\n                    >\n                         Send\n                    </Button>\n               </div>\n          </div>\n     );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}