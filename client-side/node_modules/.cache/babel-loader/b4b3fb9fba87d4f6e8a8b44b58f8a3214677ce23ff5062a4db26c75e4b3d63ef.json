{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/vijay/Desktop/start/client-side/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/vijay/Desktop/start/client-side/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/vijay/Desktop/start/client-side/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import\"./Components.css\";import Button from\"react-bootstrap/Button\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import Modal from\"react-bootstrap/Modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function OrganisationCard(prop){var navigate=useNavigate();var currentUser_={};// modal\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var handleClose=function handleClose(){setShow(false);};var handleShow=function handleShow(){setShow(true);};var handleLeave=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var out,response,newOrgs,curUser,redirectURL;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setShow(false);currentUser_=JSON.parse(localStorage.getItem(\"currentUser\"));out={name:currentUser_.name,email:currentUser_.email,password:currentUser_.password,organisations:currentUser_.organisations,userId:currentUser_._id,organisationId:prop.id};_context.prev=3;_context.next=6;return fetch(\"https://dizkuz-server.onrender.com/leaveOrg\",{method:\"POST\",body:JSON.stringify(out),headers:{\"Content-Type\":\"application/json\"}});case 6:response=_context.sent;_context.next=9;return response.json();case 9:newOrgs=_context.sent;if(newOrgs.process===\"success\"){curUser={name:newOrgs.user.name,email:newOrgs.user.email,password:newOrgs.user.password,organisations:newOrgs.user.organisations,messages:newOrgs.user.messages,_id:newOrgs.user._id,__v:newOrgs.user.__v};localStorage.removeItem(\"currentUser\");localStorage.setItem(\"currentUser\",JSON.stringify(curUser));// navigate(\"/organisations\");\nprop.setRerenderer(!prop.rerenderer);redirectURL=\"/organisations\";localStorage.setItem(\"dizkuzredirectURL\",JSON.stringify(redirectURL));navigate(\"/redirect\");}_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](3);window.alert(\"Try again !\");setShow(true);case 17:case\"end\":return _context.stop();}},_callee,null,[[3,13]]);}));return function handleLeave(_x){return _ref.apply(this,arguments);};}();var openOrganisation=function openOrganisation(){var dizkuzData=JSON.parse(localStorage.getItem(\"dizkuzData\"));dizkuzData.currentOrganisation=prop.id;dizkuzData.currentOrganisationName=prop.title;localStorage.removeItem(\"dizkuzData\");localStorage.setItem(\"dizkuzData\",JSON.stringify(dizkuzData));navigate(\"/categories\");};var leaveOrganisation=function leaveOrganisation(){setShow(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"OrganisationCardOuter\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"OrganisationTitle\",children:[\" \",/*#__PURE__*/_jsx(\"h5\",{children:prop.title}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"OrganisationButtons\",children:[/*#__PURE__*/_jsx(Button,{className:\"orgbtn\",variant:\"outline-primary\",onClick:openOrganisation,children:\"Open\"}),/*#__PURE__*/_jsx(Button,{className:\"orgbtn\",variant:\"outline-danger\",onClick:leaveOrganisation,children:\"Leave\"})]})]}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Are you sure?\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:\"Once you leave this, you won't be able to access it ever again.\"}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:handleLeave,children:\"Leave\"})]})]})]});}","map":{"version":3,"names":["React","Button","useState","useEffect","useNavigate","Modal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrganisationCard","prop","navigate","currentUser_","_useState","_useState2","_slicedToArray","show","setShow","handleClose","handleShow","handleLeave","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","out","response","newOrgs","curUser","redirectURL","wrap","_callee$","_context","prev","next","JSON","parse","localStorage","getItem","name","email","password","organisations","userId","_id","organisationId","id","fetch","method","body","stringify","headers","sent","json","process","user","messages","__v","removeItem","setItem","setRerenderer","rerenderer","t0","window","alert","stop","_x","apply","arguments","openOrganisation","dizkuzData","currentOrganisation","currentOrganisationName","title","leaveOrganisation","children","className","variant","onClick","onHide","Header","closeButton","Title","Body","Footer"],"sources":["C:/Users/vijay/Desktop/start/client-side/src/Components/OrganisationCard.js"],"sourcesContent":["import React from \"react\";\nimport \"./Components.css\";\nimport Button from \"react-bootstrap/Button\";\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Modal from \"react-bootstrap/Modal\";\n\nexport default function OrganisationCard(prop) {\n     const navigate = useNavigate();\n     let currentUser_ = {};\n\n     // modal\n     const [show, setShow] = useState(false);\n\n     const handleClose = () => {\n          setShow(false);\n     };\n     const handleShow = () => {\n          setShow(true);\n     };\n     const handleLeave = async (e) => {\n          setShow(false);\n          currentUser_ = JSON.parse(localStorage.getItem(\"currentUser\"));\n          const out = {\n               name: currentUser_.name,\n               email: currentUser_.email,\n               password: currentUser_.password,\n               organisations: currentUser_.organisations,\n               userId: currentUser_._id,\n               organisationId: prop.id,\n          };\n          try {\n               const response = await fetch(\"https://dizkuz-server.onrender.com/leaveOrg\", {\n                    method: \"POST\",\n                    body: JSON.stringify(out),\n                    headers: {\n                         \"Content-Type\": \"application/json\",\n                    },\n               });\n               const newOrgs = await response.json();\n               if (newOrgs.process === \"success\") {\n                    let curUser = {\n                         name: newOrgs.user.name,\n                         email: newOrgs.user.email,\n                         password: newOrgs.user.password,\n                         organisations: newOrgs.user.organisations,\n                         messages: newOrgs.user.messages,\n                         _id: newOrgs.user._id,\n                         __v: newOrgs.user.__v,\n                    };\n                    localStorage.removeItem(\"currentUser\");\n                    localStorage.setItem(\n                         \"currentUser\",\n                         JSON.stringify(curUser)\n                    );\n                    // navigate(\"/organisations\");\n                    prop.setRerenderer(!prop.rerenderer);\n                    const redirectURL = \"/organisations\";\n                    localStorage.setItem(\n                         \"dizkuzredirectURL\",\n                         JSON.stringify(redirectURL)\n                    );\n                    navigate(\"/redirect\");\n               }\n          } catch (error) {\n               window.alert(\"Try again !\");\n               setShow(true);\n          }\n     };\n\n     const openOrganisation = () => {\n          const dizkuzData = JSON.parse(localStorage.getItem(\"dizkuzData\"));\n          dizkuzData.currentOrganisation = prop.id;\n          dizkuzData.currentOrganisationName = prop.title;\n          localStorage.removeItem(\"dizkuzData\");\n          localStorage.setItem(\"dizkuzData\", JSON.stringify(dizkuzData));\n          navigate(\"/categories\");\n     };\n     const leaveOrganisation = () => {\n          setShow(true);\n     };\n\n     return (\n          <>\n               <div className=\"OrganisationCardOuter\">\n                    <div className=\"OrganisationTitle\">\n                         {\" \"}\n                         <h5>{prop.title}</h5>{\" \"}\n                    </div>\n                    <div className=\"OrganisationButtons\">\n                         <Button\n                              className=\"orgbtn\"\n                              variant=\"outline-primary\"\n                              onClick={openOrganisation}\n                         >\n                              Open\n                         </Button>\n                         <Button\n                              className=\"orgbtn\"\n                              variant=\"outline-danger\"\n                              onClick={leaveOrganisation}\n                         >\n                              Leave\n                         </Button>\n                    </div>\n               </div>\n               <Modal show={show} onHide={handleClose}>\n                    <Modal.Header closeButton>\n                         <Modal.Title>Are you sure?</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                         Once you leave this, you won't be able to access it\n                         ever again.\n                    </Modal.Body>\n                    <Modal.Footer>\n                         <Button variant=\"secondary\" onClick={handleClose}>\n                              Cancel\n                         </Button>\n                         <Button variant=\"danger\" onClick={handleLeave}>\n                              Leave\n                         </Button>\n                    </Modal.Footer>\n               </Modal>\n          </>\n     );\n}\n"],"mappings":"0YAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,kBAAkB,CACzB,MAAO,CAAAC,MAAM,KAAM,wBAAwB,CAC3C,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE1C,cAAe,SAAS,CAAAC,gBAAgBA,CAACC,IAAI,CAAE,CAC1C,GAAM,CAAAC,QAAQ,CAAGV,WAAW,EAAE,CAC9B,GAAI,CAAAW,YAAY,CAAG,CAAC,CAAC,CAErB;AACA,IAAAC,SAAA,CAAwBd,QAAQ,CAAC,KAAK,CAAC,CAAAe,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAhCG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IAEpB,GAAM,CAAAI,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACrBD,OAAO,CAAC,KAAK,CAAC,CACnB,CAAC,CACD,GAAM,CAAAE,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACpBF,OAAO,CAAC,IAAI,CAAC,CAClB,CAAC,CACD,GAAM,CAAAG,WAAW,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,CAAC,MAAAC,GAAA,CAAAC,QAAA,CAAAC,OAAA,CAAAC,OAAA,CAAAC,WAAA,QAAAR,mBAAA,GAAAS,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACvBnB,OAAO,CAAC,KAAK,CAAC,CACdL,YAAY,CAAGyB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC,CACxDb,GAAG,CAAG,CACPc,IAAI,CAAE7B,YAAY,CAAC6B,IAAI,CACvBC,KAAK,CAAE9B,YAAY,CAAC8B,KAAK,CACzBC,QAAQ,CAAE/B,YAAY,CAAC+B,QAAQ,CAC/BC,aAAa,CAAEhC,YAAY,CAACgC,aAAa,CACzCC,MAAM,CAAEjC,YAAY,CAACkC,GAAG,CACxBC,cAAc,CAAErC,IAAI,CAACsC,EAC1B,CAAC,CAAAd,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAE2B,CAAAa,KAAK,CAAC,6CAA6C,CAAE,CACvEC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEd,IAAI,CAACe,SAAS,CAACzB,GAAG,CAAC,CACzB0B,OAAO,CAAE,CACJ,cAAc,CAAE,kBACrB,CACL,CAAC,CAAC,QANIzB,QAAQ,CAAAM,QAAA,CAAAoB,IAAA,CAAApB,QAAA,CAAAE,IAAA,SAOQ,CAAAR,QAAQ,CAAC2B,IAAI,EAAE,QAA/B1B,OAAO,CAAAK,QAAA,CAAAoB,IAAA,CACb,GAAIzB,OAAO,CAAC2B,OAAO,GAAK,SAAS,CAAE,CAC1B1B,OAAO,CAAG,CACTW,IAAI,CAAEZ,OAAO,CAAC4B,IAAI,CAAChB,IAAI,CACvBC,KAAK,CAAEb,OAAO,CAAC4B,IAAI,CAACf,KAAK,CACzBC,QAAQ,CAAEd,OAAO,CAAC4B,IAAI,CAACd,QAAQ,CAC/BC,aAAa,CAAEf,OAAO,CAAC4B,IAAI,CAACb,aAAa,CACzCc,QAAQ,CAAE7B,OAAO,CAAC4B,IAAI,CAACC,QAAQ,CAC/BZ,GAAG,CAAEjB,OAAO,CAAC4B,IAAI,CAACX,GAAG,CACrBa,GAAG,CAAE9B,OAAO,CAAC4B,IAAI,CAACE,GACvB,CAAC,CACDpB,YAAY,CAACqB,UAAU,CAAC,aAAa,CAAC,CACtCrB,YAAY,CAACsB,OAAO,CACf,aAAa,CACbxB,IAAI,CAACe,SAAS,CAACtB,OAAO,CAAC,CAC3B,CACD;AACApB,IAAI,CAACoD,aAAa,CAAC,CAACpD,IAAI,CAACqD,UAAU,CAAC,CAC9BhC,WAAW,CAAG,gBAAgB,CACpCQ,YAAY,CAACsB,OAAO,CACf,mBAAmB,CACnBxB,IAAI,CAACe,SAAS,CAACrB,WAAW,CAAC,CAC/B,CACDpB,QAAQ,CAAC,WAAW,CAAC,CAC1B,CAACuB,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAA8B,EAAA,CAAA9B,QAAA,aAED+B,MAAM,CAACC,KAAK,CAAC,aAAa,CAAC,CAC3BjD,OAAO,CAAC,IAAI,CAAC,CAAC,yBAAAiB,QAAA,CAAAiC,IAAA,MAAA1C,OAAA,iBAEvB,kBAhDK,CAAAL,WAAWA,CAAAgD,EAAA,SAAA/C,IAAA,CAAAgD,KAAA,MAAAC,SAAA,OAgDhB,CAED,GAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAA,CAAS,CAC1B,GAAM,CAAAC,UAAU,CAAGnC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC,CACjEgC,UAAU,CAACC,mBAAmB,CAAG/D,IAAI,CAACsC,EAAE,CACxCwB,UAAU,CAACE,uBAAuB,CAAGhE,IAAI,CAACiE,KAAK,CAC/CpC,YAAY,CAACqB,UAAU,CAAC,YAAY,CAAC,CACrCrB,YAAY,CAACsB,OAAO,CAAC,YAAY,CAAExB,IAAI,CAACe,SAAS,CAACoB,UAAU,CAAC,CAAC,CAC9D7D,QAAQ,CAAC,aAAa,CAAC,CAC5B,CAAC,CACD,GAAM,CAAAiE,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAA,CAAS,CAC3B3D,OAAO,CAAC,IAAI,CAAC,CAClB,CAAC,CAED,mBACKX,KAAA,CAAAE,SAAA,EAAAqE,QAAA,eACKvE,KAAA,QAAKwE,SAAS,CAAC,uBAAuB,CAAAD,QAAA,eACjCvE,KAAA,QAAKwE,SAAS,CAAC,mBAAmB,CAAAD,QAAA,EAC5B,GAAG,cACJzE,IAAA,OAAAyE,QAAA,CAAKnE,IAAI,CAACiE,KAAK,EAAM,CAAC,GAAG,GACxB,cACNrE,KAAA,QAAKwE,SAAS,CAAC,qBAAqB,CAAAD,QAAA,eAC/BzE,IAAA,CAACN,MAAM,EACFgF,SAAS,CAAC,QAAQ,CAClBC,OAAO,CAAC,iBAAiB,CACzBC,OAAO,CAAET,gBAAiB,CAAAM,QAAA,CAC9B,MAED,EAAS,cACTzE,IAAA,CAACN,MAAM,EACFgF,SAAS,CAAC,QAAQ,CAClBC,OAAO,CAAC,gBAAgB,CACxBC,OAAO,CAAEJ,iBAAkB,CAAAC,QAAA,CAC/B,OAED,EAAS,GACR,GACL,cACNvE,KAAA,CAACJ,KAAK,EAACc,IAAI,CAAEA,IAAK,CAACiE,MAAM,CAAE/D,WAAY,CAAA2D,QAAA,eAClCzE,IAAA,CAACF,KAAK,CAACgF,MAAM,EAACC,WAAW,MAAAN,QAAA,cACpBzE,IAAA,CAACF,KAAK,CAACkF,KAAK,EAAAP,QAAA,CAAC,eAAa,EAAc,EAC9B,cACfzE,IAAA,CAACF,KAAK,CAACmF,IAAI,EAAAR,QAAA,CAAC,iEAGZ,EAAa,cACbvE,KAAA,CAACJ,KAAK,CAACoF,MAAM,EAAAT,QAAA,eACRzE,IAAA,CAACN,MAAM,EAACiF,OAAO,CAAC,WAAW,CAACC,OAAO,CAAE9D,WAAY,CAAA2D,QAAA,CAAC,QAElD,EAAS,cACTzE,IAAA,CAACN,MAAM,EAACiF,OAAO,CAAC,QAAQ,CAACC,OAAO,CAAE5D,WAAY,CAAAyD,QAAA,CAAC,OAE/C,EAAS,GACC,GACZ,GACV,CAEb"},"metadata":{},"sourceType":"module","externalDependencies":[]}